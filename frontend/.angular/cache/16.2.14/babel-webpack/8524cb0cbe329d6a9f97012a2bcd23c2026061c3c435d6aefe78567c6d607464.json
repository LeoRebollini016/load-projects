{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ProjectService } from '../../services/project.service';\nimport { UploadService } from '../../services/upload.service';\nimport { Global } from '../../services/global';\nlet EditComponent = class EditComponent {\n  constructor(_projectService, _uploadService, _router, _route) {\n    this._projectService = _projectService;\n    this._uploadService = _uploadService;\n    this._router = _router;\n    this._route = _route;\n    this.title = \"Editar proyecto\";\n    this.url = Global.url;\n  }\n  ngOnInit() {\n    this._route.params.subscribe(params => {\n      let id = params.id;\n      this.getProject(id);\n    });\n  }\n  getProject(id) {\n    this._projectService.getProject(id).subscribe(response => {\n      this.project = response.project;\n    }, error => {\n      console.log(error);\n    });\n  }\n  onSubmit(form) {\n    this._projectService.updateProject(this.project).subscribe(response => {\n      if (response.project) {\n        // Subir la imagen\n        if (this.filesToUpload) {\n          this._uploadService.makeFileRequest(Global.url + \"upload-image/\" + response.project._id, [], this.filesToUpload, 'image').then(result => {\n            this.save_project = result; //result.project\n            this.status = 'success';\n          });\n        } else {\n          this.save_project = response.project; //result.project\n          this.status = 'success';\n        }\n      } else {\n        this.status = 'failed';\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n  fileChangeEvent(fileInput) {\n    this.filesToUpload = fileInput.target.files;\n  }\n};\nEditComponent = __decorate([Component({\n  selector: 'app-edit',\n  templateUrl: '../create/create.component.html',\n  styleUrls: ['./edit.component.css'],\n  providers: [ProjectService, UploadService]\n})], EditComponent);\nexport { EditComponent };","map":{"version":3,"names":["Component","ProjectService","UploadService","Global","EditComponent","constructor","_projectService","_uploadService","_router","_route","title","url","ngOnInit","params","subscribe","id","getProject","response","project","error","console","log","onSubmit","form","updateProject","filesToUpload","makeFileRequest","_id","then","result","save_project","status","fileChangeEvent","fileInput","target","files","__decorate","selector","templateUrl","styleUrls","providers"],"sources":["F:\\Users\\Leo\\Desktop\\Universidad\\Cursos\\proyecto-angular\\src\\app\\components\\edit\\edit.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Project } from '../../models/project';\nimport { ProjectService } from '../../services/project.service'\nimport { UploadService } from '../../services/upload.service';\nimport { Global } from '../../services/global';\nimport { Router,ActivatedRoute,Params } from '@angular/router';\nimport { NgForm } from '@angular/forms';\n@Component({\n  selector: 'app-edit',\n  templateUrl: '../create/create.component.html',\n  styleUrls: ['./edit.component.css'],\n  providers: [ProjectService, UploadService]\n})\n\nexport class EditComponent implements OnInit {\n  public title: string;\n  public project!: Project;\n  public status!: string;\n  public filesToUpload!: Array<File>;\n  public save_project!: string;\n  public url: string;\n\n  constructor(\n    private _projectService: ProjectService,\n    private _uploadService: UploadService,\n    private _router: Router,\n    private _route: ActivatedRoute\n  ) { \n    this.title = \"Editar proyecto\";\n    this.url = Global.url;\n  }\n  ngOnInit(): void {\n    this._route.params.subscribe(params => {\n      let id = params.id;\n      this.getProject(id);\n    });\n  }\n  getProject(id: any){\n    this._projectService.getProject(id).subscribe(\n        response => {\n            this.project = response.project;\n        },\n        error => {\n          console.log(<any>error);\n        }\n      );\n  }\n  onSubmit(form: NgForm){\n    this._projectService.updateProject(this.project).subscribe(\n        response => {\n          if(response.project){       \n          // Subir la imagen\n          if(this.filesToUpload){\n            this._uploadService.makeFileRequest(Global.url + \"upload-image/\"+response.project._id, [], this.filesToUpload, 'image').then((result: any) => {\n              this.save_project = result; //result.project\n              this.status = 'success';\n            });\n          }else{\n            this.save_project = response.project; //result.project\n            this.status = 'success';\n          }\n        }else{\n          this.status = 'failed';\n        }\n        },\n        error => {\n          console.log(<any>error);\n        }\n    );\n  }\n  fileChangeEvent(fileInput: any){\n     this.filesToUpload = <Array<File>>fileInput.target.files;\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAEjD,SAASC,cAAc,QAAQ,gCAAgC;AAC/D,SAASC,aAAa,QAAQ,+BAA+B;AAC7D,SAASC,MAAM,QAAQ,uBAAuB;AAUvC,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAQxBC,YACUC,eAA+B,EAC/BC,cAA6B,EAC7BC,OAAe,EACfC,MAAsB;IAHtB,KAAAH,eAAe,GAAfA,eAAe;IACf,KAAAC,cAAc,GAAdA,cAAc;IACd,KAAAC,OAAO,GAAPA,OAAO;IACP,KAAAC,MAAM,GAANA,MAAM;IAEd,IAAI,CAACC,KAAK,GAAG,iBAAiB;IAC9B,IAAI,CAACC,GAAG,GAAGR,MAAM,CAACQ,GAAG;EACvB;EACAC,QAAQA,CAAA;IACN,IAAI,CAACH,MAAM,CAACI,MAAM,CAACC,SAAS,CAACD,MAAM,IAAG;MACpC,IAAIE,EAAE,GAAGF,MAAM,CAACE,EAAE;MAClB,IAAI,CAACC,UAAU,CAACD,EAAE,CAAC;IACrB,CAAC,CAAC;EACJ;EACAC,UAAUA,CAACD,EAAO;IAChB,IAAI,CAACT,eAAe,CAACU,UAAU,CAACD,EAAE,CAAC,CAACD,SAAS,CACzCG,QAAQ,IAAG;MACP,IAAI,CAACC,OAAO,GAAGD,QAAQ,CAACC,OAAO;IACnC,CAAC,EACDC,KAAK,IAAG;MACNC,OAAO,CAACC,GAAG,CAAMF,KAAK,CAAC;IACzB,CAAC,CACF;EACL;EACAG,QAAQA,CAACC,IAAY;IACnB,IAAI,CAACjB,eAAe,CAACkB,aAAa,CAAC,IAAI,CAACN,OAAO,CAAC,CAACJ,SAAS,CACtDG,QAAQ,IAAG;MACT,IAAGA,QAAQ,CAACC,OAAO,EAAC;QACpB;QACA,IAAG,IAAI,CAACO,aAAa,EAAC;UACpB,IAAI,CAAClB,cAAc,CAACmB,eAAe,CAACvB,MAAM,CAACQ,GAAG,GAAG,eAAe,GAACM,QAAQ,CAACC,OAAO,CAACS,GAAG,EAAE,EAAE,EAAE,IAAI,CAACF,aAAa,EAAE,OAAO,CAAC,CAACG,IAAI,CAAEC,MAAW,IAAI;YAC3I,IAAI,CAACC,YAAY,GAAGD,MAAM,CAAC,CAAC;YAC5B,IAAI,CAACE,MAAM,GAAG,SAAS;UACzB,CAAC,CAAC;SACH,MAAI;UACH,IAAI,CAACD,YAAY,GAAGb,QAAQ,CAACC,OAAO,CAAC,CAAC;UACtC,IAAI,CAACa,MAAM,GAAG,SAAS;;OAE1B,MAAI;QACH,IAAI,CAACA,MAAM,GAAG,QAAQ;;IAExB,CAAC,EACDZ,KAAK,IAAG;MACNC,OAAO,CAACC,GAAG,CAAMF,KAAK,CAAC;IACzB,CAAC,CACJ;EACH;EACAa,eAAeA,CAACC,SAAc;IAC3B,IAAI,CAACR,aAAa,GAAgBQ,SAAS,CAACC,MAAM,CAACC,KAAK;EAC3D;CACD;AA3DY/B,aAAa,GAAAgC,UAAA,EAPzBpC,SAAS,CAAC;EACTqC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,sBAAsB,CAAC;EACnCC,SAAS,EAAE,CAACvC,cAAc,EAAEC,aAAa;CAC1C,CAAC,C,EAEWE,aAAa,CA2DzB;SA3DYA,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}